<?php
class dzFrameworkReadControllerTest extends ezcTestCase
{
    static public function suite(  )
    {
        return new PHPUnit_Framework_TestSuite( 'dzFrameworkReadControllerTest' );
    }
    protected $dataDir = '';
    protected $projectDir = '';
    protected $request = null;
    protected $router = null;
    protected $project = null;

    public function setUp(  )
    {
        $this->dataDir = dirname( __FILE__ ) . '/../data';
        $this->projectDir = $this->dataDir . '/testproject';
        $this->project = require $this->projectDir . '/project.php';
        $this->request = new ezcMvcRequest;
        $this->router = $this->project->createRouter( $this->request );
    }

    public function testReadBookRouting()
    {
        $this->request->uri = '/admin/read/taBook/1';

        $result = $this->router->createController( $this->request );

        $expected = new dzFrameworkAdminController( $this->request, array( 'action' => 'read', 'class' => 'taBook', 'id' => '1' ) );

        $this->assertEquals( $expected, $result );
    }
}
